<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>Preloader Plugin for Images, using jQuery</title>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

	<style>
		body { font-family: sans-serif;}
		.container {
			clear:both;
			margin-top:20px;
		}
		.container img {
		  width:200px;
		  vertical-align: bottom;
		}
		.loadbar {
			overflow: hidden;
			width:100%;
			background:orange;
		}

		.individual {
			float:left;
			width:20px;
			height:20px;
			background-color: yellowgreen;
			box-shadow:-1px 0 0 1px rgba(255,255,255,0.2);
		}
	</style>

</head>
<body>

<div class="status">

	<div class="loadbar"></div>

</div>
<div class="container">

	<img id="img-1" class="image" src="" alt="1" data-desktop="http://fc00.deviantart.net/fs31/f/2008/235/b/d/DEMON_SAMURAI_II_by_aka_maelstrom.jpg" data-mobile="http://www.realultimatepower.net/ninja/ninjaparty.jpg" data-slider="false">

	<img id="img-2" class="image" src="" alt="2" data-desktop="http://upload.wikimedia.org/wikipedia/commons/7/7c/Samurai_with_sword.jpg" data-mobile="http://static.ddmcdn.com/gif/ninja-12.jpg" data-slider="false">

	<img id="img-3" class="image" src="" alt="3" data-desktop="http://4.bp.blogspot.com/-SXNF5NBoUwA/TVbEViPtkNI/AAAAAAAAAG0/RFzH9iTLly0/s1600/Samurai.jpg" data-mobile="https://image.guim.co.uk/sys-images/Film/Pix/pictures/2009/12/14/1260808145073/Scene-from-Ninja-Assassin-001.jpg" data-slider="false">

	<img id="img-4" class="image" src="" alt="4" data-desktop="http://www.movpins.com/big/MV5BMTQ2NzEwNTA5MV5BMl5BanBnXkFtZTcwNDA5MTU4Mw/still-of-takashi-shimura-in-seven-samurai.jpg" data-mobile="http://nikkeiview.com/images/ninja-sho-kosugi.jpg" data-slider="false">

	<img id="img-5" class="image" src="" alt="5" data-desktop="http://files.myopera.com/sukekomashi-gaijin/albums/914939/sevenSamurai.jpg" data-mobile="http://someinterestingfacts.net/wp-content/uploads/2013/01/Samurai-Armor.jpg" data-slider="false">

	<img id="img-6" class="image" src="" alt="6" data-desktop="http://www.medievalweaponinfo.com/wp-content/uploads/2011/04/samurai_armor.jpg" data-slider="false">

	<img id="img-7" class="image" src="" alt="7" data-desktop="http://coolvibe.com/wp-content/uploads/2011/02/lotus_samurai_worrier-992x880.jpg" data-slider="false">

	<img id="img-8" class="image" src="" alt="8" data-desktop="http://cyberomantic.files.wordpress.com/2012/07/satsuma-samurai-during-boshin-war-period.jpg" data-slider="false">

	<img id="img-9" class="image" src="" alt="9" data-desktop="http://www.listofimages.com/wp-content/uploads/2012/02/samurai-blue-japanese-oriental-samurai.jpg" data-slider="false">

	<img id="img-10" class="image" src="" alt="10" data-desktop="http://iganinja.jp/en/2008/02/12/n10.jpg" data-slider="false">

	<img id="img-11" class="image" src="" alt="11" data-desktop="http://iganinja.jp/en/2008/02/12/n7.JPG" data-slider="false">

	<img id="img-12" class="image" src="" alt="12" data-desktop="http://upload.wikimedia.org/wikipedia/commons/8/82/Seoi_Nage_-_Ninjutsu.jpg" data-slider="false">

	<img id="img-14" class="image" src="" alt="14" data-desktop="http://www.moss247.com/ekmps/shops/mossbristol78/images/samurai-with-sword-at-the-ready-780-p.jpg" data-slider="false">

	<img id="img-15" class="image" src="" alt="15" data-title="Title" data-desktop="http://1.bp.blogspot.com/_xpph2rwJnW0/TMxcSZ9d8BI/AAAAAAAAAEw/zPPbQZSESmM/s1600/Cold+Samurai.jpg" data-slider="false">

</div>

<script src="preloader.js"></script>
<script>

	$(function(){

		var dataName = 'desktop';

		if ( $(window).width() <= 480  ) {
			dataName = 'mobile'; // You can have several data attributes pointing to diferrent image sizes
		}

		var total = $('.container').find('img').filter('[data-' + dataName + ']').length; // Filter by data type to create the loading bar

		$('.loadbar').css({
			width: total * 20
		})

		// Initialize the plugin

		$('.container').find('img').preloader({

			data: dataName, // this is the data attr that contains the url you wan to load

			each: function() {

				// inside the "each" function "this" is the loaded image

				$(this).hide().fadeIn();

				$('<div />', {
					'class': 'individual'
				}).prependTo('.loadbar');
			},

			all: function() {

				$(this).each(function() {

					// inside the "all" function "this" is an array with all jquery image objects

				  	// console.log(this);
				});

				$('<h3 />', {
					text: 'All Images have been loaded!'
				}).prependTo('.status');

			}

		});

	});

</script>
</body>
</html>
